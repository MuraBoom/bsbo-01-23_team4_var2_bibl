# Сценарий списания книги

## Начало операции

1. Библиотекарь выбирает операцию "Списать книгу" в системе.
2. Система запрашивает идентификатор списываемой книги.

## Поиск книги

3. Библиотекарь вводит номер книги (сканирует штрих-код или вводит вручную).
4. Система ищет книгу по идентификатору.

## Проверка существования книги

5. Если книга не найдена:
   - Система показывает сообщение: "Книга не найдена".
   - Сценарий завершается.

## Проверка статуса книги

6. Если книга найдена:
   - Система проверяет текущий статус книги.

7. Если книга выдана читателю (isAvailable = false):
   - Система показывает сообщение: "Нельзя списать книгу, которая выдана".
   - Сценарий завершается.

## Списание книги

8. Если книга доступна (isAvailable = true):
   - Система удаляет книгу из каталога.
   - Система сохраняет изменения.

## Завершение операции

9. Система показывает сообщение: "Книга списана из фонда".
10. Операция завершена.

```plantuml
@startuml
title Диаграмма последовательности — Прецедент "Списать книгу"

actor Librarian
participant "WriteOffBookUseCase" as UseCase <<interactor>>
participant "ILibraryRepository" as Repo <<interface>>
participant "Book"

Librarian -> UseCase : Execute()
UseCase -> Repo : GetBookById(bookId)
Repo --> UseCase : Book

alt "Книга не найдена"
    UseCase --> Librarian : "Книга не найдена"
else "Книга найдена"
    alt "Книга выдана"
        UseCase --> Librarian : "Нельзя списать книгу, которая выдана"
    else "Книга доступна"
        UseCase -> Repo : RemoveBook(Book)
        UseCase --> Librarian : "Книга списана из фонда"
    end
end
@enduml
```

![Списание книги](Списание%20книги.png)
